<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Schema;

class ClearAllDataSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // ุชุนุทูู ูุญุต ุงูููุงุชูุญ ุงูุฃุฌูุจูุฉ ูุคูุชุงู (ูุชูุงูู ูุน ูุฎุชูู ุงูุณูุงูุงุช)
        Schema::disableForeignKeyConstraints();

        // ุฏุงูุฉ ูุณุงุนุฏุฉ ูุญุฐู ุฌุฏูู ุจุฃูุงู ุฅุฐุง ูุงู ููุฌูุฏุงู
        $safeTruncate = function (string $table, string $message) {
            if (Schema::hasTable($table)) {
                try {
                    DB::table($table)->truncate();
                } catch (\Throwable $e) {
                    // ุจุนุถ ูุญุฑูุงุช ููุงุนุฏ ุงูุจูุงูุงุช ูุง ุชุฏุนู truncate ูุน ุงููููุฏุ ูุณุชุฎุฏู delete
                    DB::table($table)->delete();
                }
                echo "โ {$message}\n";
            }
        };

        // ุญุฐู ุงูุจูุงูุงุช ูู ุงูุฌุฏุงูู ุจุงูุชุฑุชูุจ ุงูุตุญูุญ (ูู ุงูุฃุญุฏุซ ุฅูู ุงูุฃูุฏู)
        
        // 1. ุญุฐู ูุนุงููุงุช ุงูุฎุฒูุฉ ุงูุนุงูุฉ
        $safeTruncate('treasury_transactions', 'ุชู ุญุฐู ูุนุงููุงุช ุงูุฎุฒูุฉ ุงูุนุงูุฉ');
        
        // 2. ุญุฐู ูุฏููุนุงุช ุงูููุฑุฏูู
        $safeTruncate('supplier_payments', 'ุชู ุญุฐู ูุฏููุนุงุช ุงูููุฑุฏูู');
        
        // 3. ุญุฐู ูุนุงููุงุช ุงููุฎุฒูู
        $safeTruncate('inventory_transactions', 'ุชู ุญุฐู ูุนุงููุงุช ุงููุฎุฒูู');
        
        // 4. ุญุฐู ููุงุฏ ุงูุฅูุชุงุฌ
        $safeTruncate('production_materials', 'ุชู ุญุฐู ููุงุฏ ุงูุฅูุชุงุฌ');
        
        // 5. ุญุฐู ุฃูุงูุฑ ุงูุฅูุชุงุฌ
        $safeTruncate('production_orders', 'ุชู ุญุฐู ุฃูุงูุฑ ุงูุฅูุชุงุฌ');
        
        // 6. ุญุฐู ููุงุฆู ุงูููุงุฏ
        $safeTruncate('bill_of_materials', 'ุชู ุญุฐู ููุงุฆู ุงูููุงุฏ');
        
        // 7. ุญุฐู ุนูุงุตุฑ ููุงุชูุฑ ุงูุดุฑุงุก
        $safeTruncate('purchase_invoice_items', 'ุชู ุญุฐู ุนูุงุตุฑ ููุงุชูุฑ ุงูุดุฑุงุก');
        
        // 8. ุญุฐู ููุงุชูุฑ ุงูุดุฑุงุก
        $safeTruncate('purchase_invoices', 'ุชู ุญุฐู ููุงุชูุฑ ุงูุดุฑุงุก');
        
        // 9. ุญุฐู ุนูุงุตุฑ ุฃูุงูุฑ ุงูุดุฑุงุก
        $safeTruncate('purchase_order_items', 'ุชู ุญุฐู ุนูุงุตุฑ ุฃูุงูุฑ ุงูุดุฑุงุก');
        
        // 10. ุญุฐู ุฃูุงูุฑ ุงูุดุฑุงุก
        $safeTruncate('purchase_orders', 'ุชู ุญุฐู ุฃูุงูุฑ ุงูุดุฑุงุก');
        
        // 11. ุญุฐู ุนูุงุตุฑ ุฃูุงูุฑ ุงูุจูุน
        $safeTruncate('sales_order_items', 'ุชู ุญุฐู ุนูุงุตุฑ ุฃูุงูุฑ ุงูุจูุน');
        
        // 12. ุญุฐู ุฃูุงูุฑ ุงูุจูุน
        $safeTruncate('sales_orders', 'ุชู ุญุฐู ุฃูุงูุฑ ุงูุจูุน');
        
        // 13. ุญุฐู ุนูุงุตุฑ ุงููููุฏ ุงููุญุงุณุจูุฉ
        $safeTruncate('journal_entry_items', 'ุชู ุญุฐู ุนูุงุตุฑ ุงููููุฏ ุงููุญุงุณุจูุฉ');
        
        // 14. ุญุฐู ุงููููุฏ ุงููุญุงุณุจูุฉ
        $safeTruncate('journal_entries', 'ุชู ุญุฐู ุงููููุฏ ุงููุญุงุณุจูุฉ');
        
        // 15. ุญุฐู ุณูุฏุงุช ุงููุจุถ
        $safeTruncate('receipt_vouchers', 'ุชู ุญุฐู ุณูุฏุงุช ุงููุจุถ');
        
        // 16. ุญุฐู ุณูุฏุงุช ุงูุตุฑู
        $safeTruncate('payment_vouchers', 'ุชู ุญุฐู ุณูุฏุงุช ุงูุตุฑู');
        
        // 17. ุญุฐู ุงููุตุฑููุงุช
        $safeTruncate('expenses', 'ุชู ุญุฐู ุงููุตุฑููุงุช');
        
        // 18. ุญุฐู ุงูุฅูุฑุงุฏุงุช
        $safeTruncate('revenues', 'ุชู ุญุฐู ุงูุฅูุฑุงุฏุงุช');
        
        // 19. ุญุฐู ุงููุฏููุนุงุช
        $safeTruncate('payments', 'ุชู ุญุฐู ุงููุฏููุนุงุช');
        
        // 20. ุญุฐู ุงูุฃุตูู ุงูุซุงุจุชุฉ
        $safeTruncate('fixed_assets', 'ุชู ุญุฐู ุงูุฃุตูู ุงูุซุงุจุชุฉ');
        
        // 21. ุญุฐู ุฌุฑุฏ ุงูุฃุตูู
        $safeTruncate('asset_inventories', 'ุชู ุญุฐู ุฌุฑุฏ ุงูุฃุตูู');
        
        // 22. ุญุฐู ุฅููุงู ุงูุฃุตูู
        $safeTruncate('asset_depreciations', 'ุชู ุญุฐู ุฅููุงู ุงูุฃุตูู');
        
        // 23. ุญุฐู ูุนุงููุงุช ุงูููุซููู
        $safeTruncate('representative_transactions', 'ุชู ุญุฐู ูุนุงููุงุช ุงูููุซููู');
        
        // 24. ุญุฐู ุณุฌูุงุช ุงูุชุฏููู
        $safeTruncate('audit_logs', 'ุชู ุญุฐู ุณุฌูุงุช ุงูุชุฏููู');
        
        // 25. ุญุฐู ุงูุฃุตูุงู
        $safeTruncate('items', 'ุชู ุญุฐู ุงูุฃุตูุงู');
        
        // 26. ุญุฐู ุชุตูููุงุช ุงูุฃุตูุงู
        $safeTruncate('item_categories', 'ุชู ุญุฐู ุชุตูููุงุช ุงูุฃุตูุงู');
        
        // 27. ุญุฐู ุงููุณุชูุฏุนุงุช
        $safeTruncate('warehouses', 'ุชู ุญุฐู ุงููุณุชูุฏุนุงุช');
        
        // 28. ุญุฐู ูุฑุงูุฒ ุงูุนูู
        $safeTruncate('work_centers', 'ุชู ุญุฐู ูุฑุงูุฒ ุงูุนูู');
        
        // 29. ุญุฐู ุงูุนููุงุก
        $safeTruncate('customers', 'ุชู ุญุฐู ุงูุนููุงุก');
        
        // 30. ุญุฐู ุงูููุฑุฏูู
        $safeTruncate('suppliers', 'ุชู ุญุฐู ุงูููุฑุฏูู');
        
        // 31. ุญุฐู ุงูููุซููู
        $safeTruncate('sales_representatives', 'ุชู ุญุฐู ุงูููุซููู');
        
        // 32. ุญุฐู ุชุตูููุงุช ุงูุฃุตูู
        $safeTruncate('asset_categories', 'ุชู ุญุฐู ุชุตูููุงุช ุงูุฃุตูู');
        
        // 33. ุญุฐู ุฃููุงุน ุงููุตุฑููุงุช
        $safeTruncate('expense_types', 'ุชู ุญุฐู ุฃููุงุน ุงููุตุฑููุงุช');
        
        // 34. ุญุฐู ุฃููุงุน ุงูุฅูุฑุงุฏุงุช
        $safeTruncate('revenue_types', 'ุชู ุญุฐู ุฃููุงุน ุงูุฅูุฑุงุฏุงุช');
        
        // 35. ุญุฐู ุญุณุงุจุงุช ุงูุตูุฏูู ูุงูุจูู
        $safeTruncate('cash_accounts', 'ุชู ุญุฐู ุญุณุงุจุงุช ุงูุตูุฏูู ูุงูุจูู');
        
        // 36. ุญุฐู ุฏููู ุงูุญุณุงุจุงุช
        $safeTruncate('chart_of_accounts', 'ุชู ุญุฐู ุฏููู ุงูุญุณุงุจุงุช');
        
        // 37. ุญุฐู ุงูุฎุฒูุฉ ุงูุนุงูุฉ
        $safeTruncate('treasury', 'ุชู ุญุฐู ุงูุฎุฒูุฉ ุงูุนุงูุฉ');
        
        // 38. ุญุฐู ุงููุณุชุฎุฏููู (ุจุงุณุชุซูุงุก ุงููุฏูุฑ)
        if (Schema::hasTable('users')) {
            DB::table('users')->where('id', '!=', 1)->delete();
            echo "โ ุชู ุญุฐู ุงููุณุชุฎุฏููู (ุจุงุณุชุซูุงุก ุงููุฏูุฑ)\n";
        }
        
        // ุฅุนุงุฏุฉ ุชูุนูู ูุญุต ุงูููุงุชูุญ ุงูุฃุฌูุจูุฉ
        Schema::enableForeignKeyConstraints();
        
        echo "\n๐ ุชู ุญุฐู ุฌููุน ุงูุจูุงูุงุช ุจูุฌุงุญ!\n";
        echo "๐ ููููู ุงูุขู ุงูุจุฏุก ูู ุฅุฏุฎุงู ุจูุงูุงุช ุฌุฏูุฏุฉ.\n";
    }
} 