# دورة عمل أوامر الإنتاج

## نظرة عامة
نظام أوامر الإنتاج يعمل على مراحل متسلسلة لضمان التحكم الدقيق في المخزون والموارد.

## مراحل أمر الإنتاج

### 1. إنشاء الأمر (Draft - مسودة)
- عند إنشاء أمر إنتاج جديد، يتم تعيين الحالة تلقائياً إلى **مسودة**
- في هذه المرحلة:
  - يمكن تعديل الأمر
  - يمكن حذف الأمر
  - **لا يتم خصم أي مواد من المخزون**
  - **لا يتم إنشاء أي معاملات مخزون**

### 2. تفعيل الأمر (Released - مفعل)
- بعد مراجعة الأمر، يجب **تفعيله** ليتحول إلى حالة **مفعل**
- في هذه المرحلة:
  - يمكن تعديل الأمر
  - يمكن حذف الأمر
  - **لا يتم خصم أي مواد من المخزون بعد**
  - الأمر جاهز لبدء الإنتاج

### 3. بدء الإنتاج (In Progress - قيد التنفيذ)
- عند الضغط على **بدء الإنتاج** (من حالة مفعل):
  - يتم التحقق من توفر المواد الخام في المخزون
  - **يتم خصم المواد الخام من المخزون تلقائياً**
  - يتم إنشاء معاملات مخزون من نوع "صرف" (Issue)
  - تتغير الحالة إلى **قيد التنفيذ**

### 4. إكمال الإنتاج (Completed - مكتمل)
- عند إكمال الإنتاج:
  - يتم إدخال الكمية الفعلية المنتجة
  - يتم اختيار المستودع لتخزين المنتج النهائي
  - **يتم إضافة المنتج النهائي إلى المخزون**
  - يتم إنشاء معاملات مخزون من نوع "استلام" (Receipt)
  - تتغير الحالة إلى **مكتمل**

## لماذا هذه المراحل؟

### الأمان في المخزون
- **لا يتم خصم المواد إلا عند بدء الإنتاج الفعلي**
- يمنع الخصم المبكر للمواد قبل التأكد من بدء الإنتاج
- يسمح بإلغاء أو تعديل الأوامر قبل خصم المواد

### التحكم في التكاليف
- تتبع دقيق لاستهلاك المواد الخام
- حساب تكاليف الإنتاج الفعلية
- مقارنة الكميات المخططة مع الفعلية

### الشفافية
- كل مرحلة لها معنى واضح
- يمكن تتبع حالة كل أمر إنتاج
- سجلات كاملة لجميع المعاملات

## كيفية الاستخدام

### إنشاء أمر إنتاج جديد
1. اذهب إلى **أوامر الإنتاج** → **إنشاء جديد**
2. املأ البيانات المطلوبة
3. احفظ الأمر (سيصبح في حالة مسودة)

### تفعيل أمر الإنتاج
1. اذهب إلى تفاصيل أمر الإنتاج
2. اضغط على **تفعيل الأمر**
3. تأكد من صحة البيانات قبل التفعيل

### بدء الإنتاج
1. تأكد من توفر المواد الخام في المخزون
2. اضغط على **بدء الإنتاج**
3. سيتم خصم المواد الخام تلقائياً

### إكمال الإنتاج
1. عند انتهاء الإنتاج، اضغط على **إكمال الإنتاج**
2. أدخل الكمية الفعلية المنتجة
3. اختر المستودع لتخزين المنتج النهائي

## ملاحظات مهمة

- **المواد الخام لا تُخصم إلا عند بدء الإنتاج**
- **المنتج النهائي لا يُضاف للمخزون إلا عند إكمال الإنتاج**
- يمكن تعديل أو إلغاء الأوامر في مرحلة المسودة والمفعل
- يجب التأكد من توفر المواد الخام قبل بدء الإنتاج 