# البيانات الافتراضية - نظام إدارة الخشب

## نظرة عامة

تم إنشاء مجموعة شاملة من البيانات الافتراضية لاختبار جميع وظائف النظام والتأكد من عملها بشكل صحيح، مع تفعيل نظام الصلاحيات والأدوار.

## كيفية تشغيل البيانات الافتراضية

### الطريقة الأولى: استخدام الأمر المخصص
```bash
# تشغيل البيانات الافتراضية مع الحفاظ على البيانات الموجودة
php artisan demo:seed

# إعادة إنشاء قاعدة البيانات مع البيانات الافتراضية
php artisan demo:seed --fresh
```

### الطريقة الثانية: استخدام DatabaseSeeder
```bash
# تشغيل جميع الـ seeders
php artisan db:seed

# إعادة إنشاء قاعدة البيانات مع جميع الـ seeders
php artisan migrate:fresh --seed
```

## بيانات تسجيل الدخول

### المستخدم الرئيسي (مدير النظام)
- **البريد الإلكتروني**: admin@example.com
- **كلمة المرور**: 123456
- **الدور**: Administrator
- **الصلاحيات**: جميع الصلاحيات

### محاسب
- **البريد الإلكتروني**: mohamed@example.com
- **كلمة المرور**: 123456
- **الدور**: Accountant
- **الصلاحيات**: الصلاحيات المالية والحسابية

### موظف مبيعات
- **البريد الإلكتروني**: fatima@example.com
- **كلمة المرور**: 123456
- **الدور**: Sales Clerk
- **الصلاحيات**: صلاحيات المبيعات والعملاء

## نظام الصلاحيات

### الأدوار المتوفرة:
1. **Administrator** - مدير النظام (جميع الصلاحيات)
2. **Accountant** - محاسب (الصلاحيات المالية)
3. **Production Manager** - مدير الإنتاج (صلاحيات الإنتاج والمخزون)
4. **Sales Clerk** - موظف مبيعات (صلاحيات المبيعات)
5. **Inventory Clerk** - موظف مخزون (صلاحيات المخزون)

### إدارة الصلاحيات:
```bash
# عرض جميع الأدوار
php artisan permissions:manage list-roles

# عرض جميع الصلاحيات
php artisan permissions:manage list-permissions

# عرض جميع المستخدمين
php artisan permissions:manage list-users

# تعيين دور لمستخدم
php artisan permissions:manage assign-role --user=user@example.com --role=Accountant

# تعيين صلاحية لمستخدم
php artisan permissions:manage assign-permission --user=user@example.com --permission=print reports

# عرض صلاحيات مستخدم
php artisan permissions:manage user-permissions --user=user@example.com

# عرض صلاحيات دور
php artisan permissions:manage role-permissions --role=Accountant
```

## البيانات المتوفرة

### 1. المستخدمين (3 مستخدمين)
- مدير النظام (admin@example.com) - دور Administrator
- محمد أحمد (mohamed@example.com) - دور Accountant
- فاطمة علي (fatima@example.com) - دور Sales Clerk

### 2. دليل الحسابات (25 حساب)
- الأصول (الأصول المتداولة، الأصول الثابتة)
- الخصوم (الخصوم المتداولة)
- حقوق الملكية (رأس المال، الأرباح المحتجزة)
- الإيرادات (إيرادات المبيعات، إيرادات أخرى)
- المصروفات (مصروفات التشغيل، مصروفات إدارية)

### 3. فئات الأصناف (5 فئات)
- خشب طبيعي
- خشب مصنع
- أدوات نجارة
- مواد لاصقة
- دهانات

### 4. الأصناف (5 أصناف)
- خشب زان طبيعي (2500 دينار ليبي)
- خشب صنوبر (1800 دينار ليبي)
- خشب MDF (150 دينار ليبي)
- منشار كهربائي (800 دينار ليبي)
- غراء خشب (25 دينار ليبي)

### 5. المستودعات (3 مستودعات)
- المستودع الرئيسي (طرابلس)
- مستودع بنغازي
- مستودع مصراتة

### 6. العملاء (3 عملاء)
- شركة البناء الحديث
- مؤسسة الديكور الفاخر
- شركة الأثاث العالمية

### 7. الموردين (3 موردين)
- شركة الأخشاب العالمية
- مؤسسة الأدوات المهنية
- شركة المواد الكيميائية

### 8. أنواع المصروفات (5 أنواع)
- مصروفات إدارية
- مصروفات تشغيلية
- مصروفات صيانة
- مصروفات كهرباء
- مصروفات مياه

### 9. أنواع الإيرادات (3 أنواع)
- إيرادات مبيعات
- إيرادات خدمات
- إيرادات أخرى

### 10. المصروفات (3 مصروفات)
- مصروفات مكتبية (500 دينار ليبي)
- مصروفات تشغيل المصنع (1200 دينار ليبي)
- صيانة المعدات (800 دينار ليبي)

### 11. الإيرادات (2 إيرادات)
- بيع خشب زان (5000 دينار ليبي)
- خدمات نجارة (1500 دينار ليبي)

### 12. حسابات الصندوق والبنك (2 حسابات)
- الصندوق الرئيسي (10000 دينار ليبي)
- حساب البنك التجاري (50000 دينار ليبي)

### 13. مدفوعات الموردين (2 مدفوعات)
- دفع فاتورة خشب (5000 دينار ليبي)
- دفع فاتورة أدوات (2000 دينار ليبي)

### 14. سندات القبض (2 سندات)
- قبض من عميل (3000 دينار ليبي)
- مبيعات نقدية (1500 دينار ليبي)

### 15. سندات الصرف (2 سندات)
- دفع لمورد (1000 دينار ليبي)
- دفع مصروفات (500 دينار ليبي)

### 16. فواتير الشراء (2 فواتير)
- شراء خشب زان (5000 دينار ليبي)
- شراء أدوات نجارة (2000 دينار ليبي)

### 17. طلبات المبيعات (2 طلبات)
- طلب خشب زان (3000 دينار ليبي)
- طلب خشب MDF (1500 دينار ليبي)

### 18. الخزنة العامة
- رصيد افتتاحي: 100000 دينار ليبي
- رصيد حالي: 100000 دينار ليبي
- إجمالي القبض: 4500 دينار ليبي
- إجمالي الصرف: 1500 دينار ليبي

### 19. الأصول الثابتة (2 أصول)
- مبنى المصنع (500000 دينار ليبي)
- منشار كهربائي (5000 دينار ليبي)

### 20. معاملات المخزون (3 معاملات)
- استلام خشب زان (50 متر مكعب)
- استلام خشب صنوبر (100 متر مكعب)
- صرف خشب زان للبيع (10 متر مكعب)

### 21. أوامر الإنتاج (1 أمر)
- إنتاج خشب زان (100 قطعة)

### 22. قوائم المواد (1 قائمة)
- قائمة مواد طاولة خشبية

### 23. مراكز العمل (2 مراكز)
- ورشة النجارة
- ورشة الطلاء

### 24. القيود اليومية (2 قيود)
- تسجيل شراء مخزون
- تسجيل مبيعات

## اختبار الوظائف حسب الصلاحيات

### 1. اختبار مدير النظام (admin@example.com)
- الوصول لجميع الأقسام
- إدارة المستخدمين والأدوار
- إدارة جميع البيانات

### 2. اختبار المحاسب (mohamed@example.com)
- الوصول: `/treasury` - الخزنة العامة
- الوصول: `/expenses` - المصروفات
- الوصول: `/revenues` - الإيرادات
- الوصول: `/cash_accounts` - حسابات الصندوق
- الوصول: `/journal_entries` - القيود اليومية
- الوصول: `/coa` - دليل الحسابات
- **لا يمكن الوصول لـ**: إدارة المستخدمين، إدارة المخزون، إدارة الإنتاج

### 3. اختبار موظف المبيعات (fatima@example.com)
- الوصول: `/customers` - العملاء
- الوصول: `/sales_orders` - طلبات المبيعات
- الوصول: `/reports/sales` - تقارير المبيعات
- الوصول: `/print` - مركز الطباعة
- **لا يمكن الوصول لـ**: إدارة الحسابات، إدارة المخزون، إدارة الإنتاج

## اختبار الوظائف العامة

### 1. اختبار الخزنة العامة
- الوصول: `/treasury`
- اختبار إضافة قبض وصرف
- اختبار تقرير الخزنة
- اختبار طباعة التقرير

### 2. اختبار المخزون
- الوصول: `/inventory_transactions`
- اختبار استلام أصناف
- اختبار صرف أصناف
- اختبار تقرير المخزون

### 3. اختبار المبيعات
- الوصول: `/sales_orders`
- اختبار إنشاء طلب مبيعات
- اختبار طباعة الفاتورة

### 4. اختبار المشتريات
- الوصول: `/purchase_invoices`
- اختبار إنشاء فاتورة شراء
- اختبار طباعة الفاتورة

### 5. اختبار المصروفات والإيرادات
- الوصول: `/expenses` و `/revenues`
- اختبار إضافة مصروفات وإيرادات
- اختبار طباعة التقارير

### 6. اختبار الطباعة
- الوصول: `/print`
- اختبار طباعة جميع التقارير والإيصالات

### 7. اختبار التقارير
- الوصول: `/reports`
- اختبار تقارير المبيعات
- اختبار تقارير المخزون
- اختبار تقارير حركة الأصناف

## ملاحظات مهمة

1. **جميع المبالغ بالدينار الليبي**
2. **التواريخ نسبية** (من اليوم الحالي)
3. **يمكن تعديل البيانات** حسب الحاجة
4. **البيانات آمنة** ويمكن حذفها في أي وقت
5. **نظام الصلاحيات مفعل** - كل مستخدم يرى فقط ما لديه صلاحية له
6. **يمكن إضافة مستخدمين جدد** وتعيين أدوار لهم

## استكشاف الأخطاء

### إذا لم تظهر البيانات:
```bash
# تنظيف الكاش
php artisan cache:clear

# إعادة تشغيل الـ seeder
php artisan demo:seed --fresh
```

### إذا لم تظهر الأقسام للمستخدم:
```bash
# التحقق من صلاحيات المستخدم
php artisan permissions:manage user-permissions --user=user@example.com

# تعيين دور للمستخدم
php artisan permissions:manage assign-role --user=user@example.com --role=Accountant
```

### إذا واجهت مشاكل في قاعدة البيانات:
```bash
# إعادة إنشاء قاعدة البيانات
php artisan migrate:fresh --seed
```

## الدعم

إذا واجهت أي مشاكل، يرجى التواصل مع فريق التطوير. 